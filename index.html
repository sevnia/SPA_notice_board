<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="shortcut icon" href="icon.png" type="image/x-icon">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>메인 페이지</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f9;
            color: #333;
            text-align: center;
        }
        header {
            background-color: #007bff;
            color: white;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 4px solid #0056b3;
        }
        header .logo {
            font-size: 24px;
            font-weight: bold;
        }
        header .logo a {
            text-decoration: none;
            color: white;
        }
        header nav {
            display: flex;
            gap: 20px;
        }
        header nav a {
            color: white;
            text-decoration: none;
            font-size: 16px;
        }
        header nav a:hover {
            text-decoration: underline;
        }
        .header-icons {
            display: none; /* 기본적으로 숨김 */
            position: absolute;
            top: 0;
            right: 0;
            width: 58px;
            height: 57.5px;
            background-color: #007bff;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            font-size: 28px; /* 아이콘 크기 증가 */
        }
        .header-icons:hover {
            background-color: #0056b3;
        }
        .sidebar {
            position: fixed;
            top: 0;
            right: 0;
            width: 250px;
            height: 100%;
            background-color: #007bff;
            color: white;
            display: none;
            flex-direction: column;
            align-items: center;
            /* padding: 20px; */
            border-radius: 0 0 0 10px;
            box-shadow: -2px 0 5px rgba(0,0,0,0.5);
        }
        .sidebar button {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            /* margin: 10px 0; */
            cursor: pointer;
            padding: 10px 20px;
            text-align: left;
            width: 100%;
        }
        .sidebar button:hover {
            background-color: #0056b3;
        }
        .close-btn {
            width: 58px;
            height: 54px;
            padding-top: 4px;
            align-self: flex-end;
            font-size: 48px; /* 아이콘 크기 증가 */
            cursor: pointer;
        }
        .close-btn:hover {
            background-color: #0056b3;
        }
        .containers {
            display: -ms-flexbox;
            margin: 20px auto;
        }
        .containers a {
            display: inline-block;
            padding: 10px;
            font-size: 18px;
            color: #007bff;
            text-decoration: none;
            border: 2px solid #007bff;
            border-radius: 5px;
            transition: background-color 0.3s, color 0.3s;
        }
        .containers a:hover {
            background-color: #007bff;
            color: white;
        }
        .containers form {
            width: 300px;
            height: auto;
            background-color: transparent;
            margin: 0 auto;
        }
        .containers form input {
            width: 250px;
            padding: 5px;
            margin-bottom: 15px;
        }
        .containers form button {
            width: 80px;
            height: auto;
            padding: 5px;
            cursor: pointer;
            background-color: white;
            border: 1px solid black;
            margin-right: -180px;
			cursor: pointer;
        }
        .post {
            width: 80%;
            max-width: 750px;
            margin: 20px auto;
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #ccc;
            /* border-radius: 8px; */
            background-color: #f9f9f9;
            text-align: left;
        }
        .post h2 {
            margin-top: 0;
            font-size: 24px;
            color: #007bff;
            display: flex;
            align-items: center;
        }
        .post h2 a {
            color: #007bff;
            text-decoration: none;
        }
        .post h2 a:hover {
            text-decoration: underline;
        }
        .post img {
            max-width: 100%;
            height: auto;
            margin-top: 10px;
        }
        .post span {
            text-align: left;
        }
        .post .timestamp {
            font-size: 14px;
            color: #888;
        }
        .post button {
            background-color: #dc3545;
            color: white;
            border: none;
            padding: 10px;
            cursor: pointer;
            border-radius: 5px;
            font-size: 16px;
        }
        .post button:hover {
            background-color: #c82333;
        }
        footer {
            background-color: #333;
            color: #fff;
            padding: 20px 0;
            text-align: center;
            margin-top: 157.5px;
        }
        footer .footer-content {
            width: 80%;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }
        footer .footer-content .left {
            font-size: 14px;
        }
        footer .footer-content .right {
            font-size: 14px;
        }
        footer .footer-content .right a {
            color: #fff;
            text-decoration: none;
            margin: 0 10px;
        }
        footer .footer-content .right a:hover {
            text-decoration: underline;
        }
        footer .footer-bottom {
            font-size: 12px;
            margin-top: 10px;
        }
        @media screen and (max-width: 600px) {
            .header-icons {
                display: flex; /* 아이콘 표시 */
            }
            header nav {
                display: none;
				
            }
        }
        @media screen and (min-width: 601px) {
            .header-icons {
                display: none; /* 아이콘 숨김 */
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo" title="메인 페이지 바로가기"><a href="index.html">MY BPS</a></div>
        <nav>
            <a href="#" id="signup-link">회원가입</a>
            <a href="#" id="login-link">로그인</a>
            <a href="write.html">게시글 작성</a>
            <a href="view.html" id="view-link">게시글 목록 보기</a>
            <a href="#" id="logout-link" style="display:none;">로그아웃</a>
            <a href="contact.html">문의하기</a>
        </nav>
        <div class="header-icons" id="sidebar-toggle">
            &#9776; <!-- 햄버거 메뉴 아이콘 -->
        </div>
    </header>
    
    <div class="sidebar" id="sidebar">
        <span class="close-btn" id="close-sidebar">&times;</span>
        <button id="icon-signup">회원가입</button>
        <button id="icon-login">로그인</button>
        <button id="icon-write">게시글 작성</button>
        <button id="icon-view">게시글 목록 보기</button>
        <button id="icon-logout" style="display:none;">로그아웃</button>
        <button id="icon-contact">문의하기</button>
    </div>

    <div id="content"></div>
    <div class="container"><div id="postDisplay"></div></div>
    <footer>
        <div class="footer-content">
            <div class="left"><p>&copy; 2024 My Company. All rights reserved.</p></div>
            <div class="right">
                <a href="#">About Us</a>
                <a href="#">Privacy Policy</a>
                <a href="#">Contact</a>
            </div>
        </div>
    </footer>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const content = document.getElementById('content');
            const signupLink = document.getElementById('signup-link');
            const loginLink = document.getElementById('login-link');
            const writeLink = document.getElementById('write-link');
            const viewLink = document.getElementById('view-link');
            const logoutLink = document.getElementById('logout-link');
            const iconSignup = document.getElementById('icon-signup');
            const iconLogin = document.getElementById('icon-login');
            const iconLogout = document.getElementById('icon-logout');
            const sidebarToggle = document.getElementById('sidebar-toggle');
            const sidebar = document.getElementById('sidebar');
            const closeSidebar = document.getElementById('close-sidebar');

            const showSignupForm = () => {
                content.innerHTML = `
                    <div class="containers">
                        <h2>회원가입</h2>
                        <form id="signupForm">
                            <input type="text" id="signupUsername" name="username" placeholder="아이디" required><br>
                            <input type="password" id="signupPassword" name="password" placeholder="비밀번호" required><br>
                            <button type="submit">회원가입</button>
                        </form>
                    </div>
                `;

                document.getElementById('signupForm').addEventListener('submit', function(event) {
                    event.preventDefault();
                    const username = document.getElementById('signupUsername').value;
                    const password = document.getElementById('signupPassword').value;

                    if (localStorage.getItem(username)) {
                        alert('이미 존재하는 사용자입니다.');
                    } else {
                        localStorage.setItem(username, password);
                        alert('회원가입이 완료되었습니다.');
                        content.innerHTML = '';
                    }
                });
            };

            const showLoginForm = () => {
                content.innerHTML = `
                    <div class="containers">
                        <h2>로그인</h2>
                        <form id="loginForm">
                            <input type="text" id="loginUsername" name="username" placeholder="아이디" required><br>
                            <input type="password" id="loginPassword" name="password" placeholder="비밀번호" required><br>
                            <button type="submit">로그인</button>
                        </form>
                    </div>
                `;

                document.getElementById('loginForm').addEventListener('submit', function(event) {
                    event.preventDefault();
                    const username = document.getElementById('loginUsername').value;
                    const password = document.getElementById('loginPassword').value;

                    const storedPassword = localStorage.getItem(username);
                    if (storedPassword === password) {
                        alert('로그인에 성공하였습니다.');
                        localStorage.setItem('loggedInUser', username);
                        checkLoginStatus();
                        content.innerHTML = '';
                    } else {
                        alert('아이디 또는 비밀번호가 잘못되었습니다.');
                    }
                });
            };

            const checkLoginStatus = () => {
                const loggedInUser = localStorage.getItem('loggedInUser');
                if (loggedInUser) {
                    signupLink.style.display = 'none';
                    loginLink.style.display = 'none';
                    logoutLink.style.display = 'inline-block';
                    iconSignup.style.display = 'none';
                    iconLogin.style.display = 'none';
                    iconLogout.style.display = 'inline-block';
                } else {
                    signupLink.style.display = 'inline-block';
                    loginLink.style.display = 'inline-block';
                    logoutLink.style.display = 'none';
                    iconSignup.style.display = 'inline-block';
                    iconLogin.style.display = 'inline-block';
                    iconLogout.style.display = 'none';
                }
            };

            signupLink.addEventListener('click', showSignupForm);
            loginLink.addEventListener('click', showLoginForm);
            logoutLink.addEventListener('click', () => {
                localStorage.removeItem('loggedInUser');
                checkLoginStatus();
                alert('로그아웃되었습니다.');
            });

            iconSignup.addEventListener('click', showSignupForm);
            iconLogin.addEventListener('click', showLoginForm);
            iconLogout.addEventListener('click', () => {
                localStorage.removeItem('loggedInUser');
                checkLoginStatus();
                alert('로그아웃되었습니다.');
            });

            sidebarToggle.addEventListener('click', () => {
                sidebar.style.display = 'flex';
            });

            closeSidebar.addEventListener('click', () => {
                sidebar.style.display = 'none';
            });

            // 사이드바 버튼 클릭 시 이동
            document.getElementById('icon-write').addEventListener('click', () => window.location.href = 'write.html');
            document.getElementById('icon-view').addEventListener('click', () => window.location.href = 'view.html');
            document.getElementById('icon-contact').addEventListener('click', () => window.location.href = 'contact.html');

            checkLoginStatus();
            loadPosts();
            displayPosts();
        });

        const POSTS_PER_PAGE = 9; // 페이지당 게시글 수
        let currentPage = 1;
        let posts = [9];

        function loadPosts() {
            const storedPosts = localStorage.getItem('posts');
            if (storedPosts) {
                posts = JSON.parse(storedPosts);
            }
        }

        function displayPosts() {
            const postDisplay = document.getElementById('postDisplay');
            const start = (currentPage - 1) * POSTS_PER_PAGE;
            const end = start + POSTS_PER_PAGE;
            const postsToDisplay = posts.slice(start, end);
            const loggedInUser = localStorage.getItem('loggedInUser');

            if (postsToDisplay.length > 0) {
                postDisplay.innerHTML = postsToDisplay.map((post, index) => `
                    <div class="post">
                        <h2><a class="post-title" href="post.html?id=${start + index}">${post.title}</a></h2>
                        <span class="timestamp">작성자 : ${loggedInUser}</span><br>
                        <span class="timestamp">작성 시간: ${post.timestamp}</span><br><br>
                    </div>
                `).join('');
                // ${post.imageURL ? `<img src="${post.imageURL}" alt="게시글 이미지">` : ''}
            } else {
                postDisplay.innerHTML = '<p>게시글이 없습니다.</p>';
            }
        }
    </script>
</body>
</html>
